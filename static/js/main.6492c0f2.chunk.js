(this.webpackJsonpwallet=this.webpackJsonpwallet||[]).push([[0],{44:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(20),c=a.n(l),i=a(24),s=(a(44),a(13)),o=a(3),u=a(10),d=a(11),m=a(12),p=a(14),E=a(18),h=a(9),f=a(16),b=function(){var e=Object(f.a)(Object(h.a)().mark((function e(){var t,a;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),v=b,g="REQUEST_CURRENCIES",x="SAVE_EXPENSE",y="DELETE_EXPENSE",j="ENABLE_EDIT",O="SAVE_EDITED_EXPENSE";var w=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).validateInputs=function(t){var a=t.target,n=a.name,r=a.value;if("password"===n&&e.setState({passwordIsValid:r.length>=6}),"email"===n){e.setState({emailIsValid:r.match(/^[\w-\\.]+@([\w-]+\.)+[\w-]{2,4}$/),email:r})}},e.login=function(){var t=e.state.email,a=e.props,n=a.makeLogin,r=a.history;n(t),r.push("/carteira")},e.state={emailIsValid:!1,passwordIsValid:!1,email:""},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.emailIsValid,a=e.passwordIsValid;return r.a.createElement("form",{className:"flex-column absolute-center shadow"},r.a.createElement("div",{className:"flex gap align-c primary pad"},r.a.createElement(E.b,{style:{fill:"gold",fontSize:"var(--fs-xl)"}}),r.a.createElement("h1",{className:"highlight"},"MyWallet")),r.a.createElement("div",{className:"flex-column gap align-c pad"},r.a.createElement("label",{className:"flex-column",htmlFor:"email"},"Email",r.a.createElement("input",{name:"email",type:"email",placeholder:"user@email.com","data-testid":"email-input",onChange:this.validateInputs})),r.a.createElement("label",{className:"flex-column",htmlFor:"password"},"Password",r.a.createElement("input",{name:"password",type:"password",placeholder:"Your password","data-testid":"password-input",onChange:this.validateInputs})),r.a.createElement("button",{className:"highlight",type:"submit",name:"loginBtn",disabled:!(t&&a),onClick:this.login},"Entrar")))}}]),a}(r.a.Component),N=Object(s.b)(null,(function(e){return{makeLogin:function(t){return e({type:"LOGIN",value:t})}}}))(w),C=a(33),S=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).getAverageExpenseValue=function(e){return e.length<1?0:e.reduce((function(e,t){var a=t.value,n=t.currency,r=t.exchangeRates[n].ask;return e+Number(a)*Number(r)}),0)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.userEmail,a=e.expenses;return r.a.createElement("div",{className:"flex space-b pad"},r.a.createElement("div",{className:"flex gap align-c"},r.a.createElement(E.b,{size:70,style:{fill:"gold"}}),r.a.createElement("h1",{className:"highlight"},"MyWallet")),r.a.createElement("div",{className:"flex-column gap"},r.a.createElement("div",{className:"flex txt-gap"},r.a.createElement("p",{className:"highlight","data-testid":"email-field"},t)),r.a.createElement("div",{className:"flex txt-gap bold"},r.a.createElement(C.a,{style:{fill:"gold"}}),r.a.createElement("p",{className:"highlight","data-testid":"total-field"},this.getAverageExpenseValue(a).toFixed(2)),r.a.createElement("p",{className:"highlight","data-testid":"header-currency-field"},"BRL"))))}}]),a}(n.Component),k=Object(s.b)((function(e){return{userEmail:e.user.email,expenses:e.wallet.expenses}}))(S),D=a(34),T=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).deleteExpense=function(t){(0,e.props.deleteExpense)(t)},e.handleEdit=function(t){var a=e.props,n=a.editExpense;a.editor||n(t)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(t){var a=t.description,n=t.tag,l=t.method,c=t.value,i=t.currency,s=t.exchangeRates[i],o=s.ask,u=s.name,d=(Number(c)*Number(o)).toFixed(2);return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,r.a.createElement("p",null,a)),r.a.createElement("td",null,r.a.createElement("p",null,n)),r.a.createElement("td",null,r.a.createElement("p",null,l)),r.a.createElement("td",null,r.a.createElement("p",null,Number(c).toFixed(2))),r.a.createElement("td",null,r.a.createElement("p",null,u)),r.a.createElement("td",null,r.a.createElement("p",null,Number(o).toFixed(2))),r.a.createElement("td",null,r.a.createElement("p",null,d)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{className:"btn-icon",type:"button",name:"edit",text:"Editar","data-testid":"edit-btn",onClick:function(){return e.handleEdit(t.id)}},r.a.createElement(E.a,{style:{fontSize:"35px"}})),r.a.createElement("button",{className:"btn-icon",type:"button",name:"delete",text:"Excluir","data-testid":"delete-btn",onClick:function(){return e.deleteExpense(t.id)}},r.a.createElement(D.a,{style:{fill:"#ff0000",fontSize:"35px"}}))))})))))}}]),a}(n.Component),V=Object(s.b)((function(e){return{expenses:e.wallet.expenses,editor:e.wallet.editor}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:y,value:e}}(t))},editExpense:function(t){return e(function(e){return{type:j,value:e}}(t))}}}))(T),I=a(23),R=a(35),A=a(36);function F(e){var t=e.name,a=e.label,n=e.options,l=e.testid,c=e.onChange,i=e.value;return r.a.createElement("label",{htmlFor:t},a,r.a.createElement("select",{id:t,name:t,"data-testid":l,onChange:c,value:i},n.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))}F.defaultProps={testid:"",label:""};var M=F,L=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],z=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],P={value:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",description:"",exchangeRates:[],isEditing:!1},_=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).componentDidMount=function(){(0,e.props.fetchCurrencies)()},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(I.a)({},n,r))},e.submitExpense=Object(f.a)(Object(h.a)().mark((function t(){var a;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:a=t.sent,e.setState({exchangeRates:a},(function(){e.saveExpense(),e.cleanState()}));case 4:case"end":return t.stop()}}),t)}))),e.cleanState=function(){e.setState(P)},e.saveExpense=function(){var t=e.state,a=t.value,n=t.currency,r=t.method,l=t.tag,c=t.description,i=t.exchangeRates,s=e.props,o=s.expenses;(0,s.addExpense)({id:o.length<1?0:o.at(-1).id+1,value:a,currency:n,method:r,tag:l,description:c,exchangeRates:i})},e.componentDidUpdate=function(){e.restoreDataToEdit()},e.restoreDataToEdit=function(){var t=e.props.editor,a=e.state.isEditing;if(t&&!a){var n=e.props,r=n.idToEdit,l=n.expenses.find((function(e){return e.id===r})),c=l.value,i=l.currency,s=l.method,o=l.tag,u=l.description;e.setState({value:c,currency:i,method:s,tag:o,description:u,isEditing:!0})}},e.submitEditedExpense=Object(f.a)(Object(h.a)().mark((function t(){var a;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:a=t.sent,e.setState({exchangeRates:a},(function(){e.handleEdit(),e.cleanState()}));case 4:case"end":return t.stop()}}),t)}))),e.handleEdit=function(){var t=e.state,a=t.value,n=t.currency,r=t.method,l=t.tag,c=t.description,i=t.exchangeRates,s=e.props,o=s.idToEdit;(0,s.saveEditedExpense)(o,{id:o,value:a,currency:n,method:r,tag:l,description:c,exchangeRates:i})},e.state=P,e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currencies,a=e.editor,n=this.state,l=n.value,c=n.currency,i=n.method,s=n.tag,o=n.description;return r.a.createElement("div",null,r.a.createElement("form",{className:"flex justify-center align-c gap"},r.a.createElement("label",{htmlFor:"Value"},"Valor",r.a.createElement("input",{name:"value",type:"number",label:"Valor",placeholder:"Valor","data-testid":"value-input",onChange:this.handleChange,value:l})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o",r.a.createElement("input",{name:"description",label:"Descri\xe7\xe3o",placeholder:"Digite aqui.","data-testid":"description-input",onChange:this.handleChange,value:o})),r.a.createElement(M,{name:"currency",testid:"currency-input",label:"Moeda",options:t,onChange:this.handleChange,value:c}),r.a.createElement(M,{name:"method",testid:"method-input",label:"Pagamento",options:L,onChange:this.handleChange,value:i}),r.a.createElement(M,{name:"tag",testid:"tag-input",label:"Categoria",options:z,onChange:this.handleChange,value:s}),a?r.a.createElement("button",{className:"round flex align-c",type:"button",name:"editExpense",text:"Editar despesa",onClick:this.submitEditedExpense},r.a.createElement(R.a,{style:{fill:"white"}})):r.a.createElement("button",{className:"round flex align-c",type:"button",name:"addExpense",text:"Adicionar despesa",onClick:this.submitExpense,style:{backgroundColor:"var(--theme)"}},r.a.createElement(A.a,{style:{fill:"white"}}))))}}]),a}(n.Component),U=Object(s.b)((function(e){return{currencies:e.wallet.currencies,expenses:e.wallet.expenses,editor:e.wallet.editor,idToEdit:e.wallet.idToEdit}}),(function(e){return{addExpense:function(t){return e(function(e){return{type:x,value:e}}(t))},fetchCurrencies:function(){return e(function(){var e=Object(f.a)(Object(h.a)().mark((function e(t){var a;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:a=e.sent,t({type:g,value:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},saveEditedExpense:function(t,a){return e(function(e,t){return{type:O,payload:{id:e,data:t}}}(t,a))}}}))(_),B=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex-column"},r.a.createElement("div",{className:"theme-bg shadow"},r.a.createElement("div",{className:"gap pad"},r.a.createElement(k,null))),r.a.createElement("div",{className:"gap pad shadow"},r.a.createElement(U,null)),r.a.createElement("div",{className:"gap pad shadow"},r.a.createElement(V,null)))}}]),a}(r.a.Component),W=B;var X=function(){return r.a.createElement(i.b,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:N}),r.a.createElement(o.a,{exact:!0,path:"/carteira",component:W})))},G=a(15),J=a(37),q=a(38),Q=a(4),Y={email:""};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;return"LOGIN"===t.type?Object(Q.a)(Object(Q.a)({},e),{},{email:t.value}):e},H=a(39),K={currencies:[],expenses:[],editor:!1,idToEdit:0};var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(Q.a)(Object(Q.a)({},e),{},{currencies:Object.keys(t.value).filter((function(e){return"USDT"!==e}))});case x:return Object(Q.a)(Object(Q.a)({},e),{},{expenses:[].concat(Object(H.a)(e.expenses),[t.value])});case y:return Object(Q.a)(Object(Q.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.value}))});case j:return Object(Q.a)(Object(Q.a)({},e),{},{editor:!0,idToEdit:t.value});case O:return Object(Q.a)(Object(Q.a)({},e),{},{expenses:e.expenses.map((function(e){return e.id===t.payload.id?Object(Q.a)({},t.payload.data):e})),editor:!1});default:return e}},ee=Object(G.combineReducers)({user:$,wallet:Z}),te=Object(G.createStore)(ee,Object(J.composeWithDevTools)(Object(G.applyMiddleware)(q.a)));window.Cypress&&(window.store=te);var ae=te;c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(s.a,{store:ae},r.a.createElement(X,null)))),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.6492c0f2.chunk.js.map